// services/auth.service.ts
// ------------------------------------------------------------
// ✅ 이 파일은 "데모 인증" 전용 서비스입니다.
// - 프론트엔드와 백엔드 연동 테스트를 위해 가짜 사용자 1명을 고정으로 둡니다.
// - 추후 실제 로그인 구현 시에는 DB 조회, 패스워드 해시(예: bcrypt),
//   세션 저장소(예: Redis)로 대체해야 합니다.
// - 절대 실서비스 환경에 하드코딩된 비밀번호나 민감정보를 두지 마세요.
// ------------------------------------------------------------

// 프론트와의 왕복 데이터 형식을 명확히 하고 싶다면 아래 타입을 참고하세요.
// (지금은 간단히 any를 쓰지 않고 명시적으로 객체 구조를 보여주기 위해 작성합니다)
// type DemoUser = { id: string; email: string; name: string };

// 🔹 데모용 고정 사용자 정보
// - 실제로는 DB에서 사용자 row를 읽어온 결과가 여기에 해당합니다.
// - name 필드는 화면 환영 문구 등에 사용할 수 있습니다.
export const DEMO_USER = { id: '1', email: 'test@example.com', name: '테스트' };

// 🔹 데모용 고정 비밀번호
// - 오직 로컬/개발 환경에서의 동작 확인을 위한 값입니다.
// - 실제 구현 시에는 비밀번호 해시를 사용하고, 평문 저장/비교를 금지하세요.
const DEMO_PASSWORD = '1234';

/**
 * 사용자가 입력한 이메일/비밀번호가 데모 계정과 일치하는지 검사합니다.
 *
 * @param email     사용자가 로그인 폼에 입력한 이메일
 * @param password  사용자가 로그인 폼에 입력한 비밀번호(데모에서는 평문 비교)
 * @returns         일치하면 DEMO_USER 객체를, 불일치하면 null을 반환합니다.
 *
 * 사용 위치(예시):
 * - POST /auth/login 라우트에서 호출
 *   - 일치 → 세션에 사용자 ID 저장 → 200 응답 (또는 /auth/me 재조회)
 *   - 불일치 → 401 Unauthorized 응답
 *
 * 보안 주의:
 * - 실제 서비스에서는 비밀번호를 해시(bcrypt 등)로 저장/검증해야 합니다.
 * - 계정 잠금/지연 응답 등 브루트포싱 방지 정책도 함께 고려하세요.
 */
export function verifyDemoUser(email: string, password: string) {
  // 단순 비교: 데모 사용자와 이메일/비밀번호가 모두 일치하는지 확인
  if (email === DEMO_USER.email && password === DEMO_PASSWORD) {
    return DEMO_USER; // ✅ 성공: 컨트롤러에서 이 값을 바탕으로 세션을 만들 수 있음
  }
  return null; // ❌ 실패: 컨트롤러에서 401 등의 에러 응답 처리
}