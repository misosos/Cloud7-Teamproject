import { create } from "zustand";

/**
 * useCategory (전역 카테고리 선택 상태)
 * ─────────────────────────────────────────────────────────
 * 목적
 *  - 화면의 여러 영역(좌/우 사이드바, 모바일 그리드, 갤러리 등)이
 *    "같은 카테고리 선택값"을 **공유**하도록 하는 전역 상태 저장소입니다.
 *  - 예) 왼쪽에서 카테고리 버튼을 누르면, 가운데 갤러리/리스트도 자동으로 해당 카테고리만 보여줌
 *
 * 이 파일을 보면 좋은 사람
 *  - 기획/디자인/QA: "카테고리를 어디서 바꾸면 어디에 반영되는지" 흐름을 이해할 때
 *  - 개발자: Zustand를 이용한 **아주 간단한 전역 상태 패턴** 예시로 참고
 *
 * 동작 개요
 *  1) `current`에 현재 선택된 카테고리명이 문자열로 들어있습니다.
 *  2) `setCurrent("영화")`처럼 호출하면 전역으로 값이 바뀌고,
 *  3) 이 값을 구독하고 있는 컴포넌트들이 자동으로 다시 그려져(리렌더) UI가 갱신됩니다.
 *
 * 초기값
 *  - `"카테고리별 기록"`으로 시작합니다. (첫 진입 시 갤러리 타이틀 등에 사용)
 *    *실제 프로젝트에서는 서비스 콘셉트에 맞는 기본 카테고리로 바꿔도 됩니다.*
 *
 * 사용 예시 (컴포넌트 내부)
 *  - 읽기:  `const current = useCategory((s) => s.current);`
 *  - 변경:  `const setCurrent = useCategory((s) => s.setCurrent);`
 *           `setCurrent("음악");`
 */

// 상태의 모양(타입)을 한눈에 볼 수 있도록 정의합니다.
export type CategoryState = {
  /** 현재 선택된 카테고리명 (예: "영화", "음악", "도서" ...) */
  current: string;
  /** 카테고리 변경 함수: 호출 즉시 전역 값이 바뀌고, 관련 화면이 자동 갱신됩니다. */
  setCurrent: (v: string) => void;
};

// 실제 전역 Store를 생성합니다.
// - create() 안의 콜백에서 초기값과 변경 함수를 정의합니다.
const useCategory = create<CategoryState>((set) => ({
  // 기본 선택값: 페이지 최초 진입 시 화면 제목/안내에 사용됩니다.
  current: "카테고리별 기록",
  // 변경 함수: 다른 컴포넌트에서 호출하면 전역 current가 업데이트됩니다.
  setCurrent: (v) => set({ current: v }),
}));

export default useCategory;